@(status: domain.SystemStatus)(implicit r: RequestHeader, flash: Flash)

@main(title = "Realtime Stream") {

  @if(status.running) {

    <script language="javascript" type="text/javascript">
      var Jem = Jem || {};
      Jem.realtime = Jem.realtime || {};
      Jem.realtime.wsUri = "@routes.Application.watchRealtimeStream.webSocketURL()";
    </script>

    <script src="@routes.Assets.at("javascripts/handlebars.js")"
            type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/gauge.min.js")"
            type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/smoothie.js")"
            type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/realtime.js")"
            type="text/javascript"></script>

    <div class="row-fluid">
      <ul id="meters" class="meters thumbnails">
        <script id="register-template" type="text/x-handlebars-template">
          <li class="meter span1 register-address-{{address}}">
            <div class="thumbnail">
              <canvas class="gauge" width="100" height="100"></canvas>
              <h4 class="register-address-label">{{address}}</h4>
              <p class="register-value-label">{{value}}</p>
            </div>
          </div>
        </script>
      </div>
    </div>

  } else {
    <p>There is no realtime stream of data right now.</p>
  }
  
}

